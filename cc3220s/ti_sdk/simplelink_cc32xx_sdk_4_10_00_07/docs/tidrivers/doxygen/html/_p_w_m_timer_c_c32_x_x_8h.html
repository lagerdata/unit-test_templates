<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>PWMTimerCC32XX.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link id="favicon" rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2298ed0e5bfee6f293aea6c715ac7f7c.html">exports</a></li><li class="navelem"><a class="el" href="dir_f980dfa2069855638b0cd8c57f735ca5.html">tidrivers_cc32xx</a></li><li class="navelem"><a class="el" href="dir_1f993ecc1be2c92f22fa996028484d25.html">source</a></li><li class="navelem"><a class="el" href="dir_7d5e4df8250b3628ec18e3540c26d41f.html">ti</a></li><li class="navelem"><a class="el" href="dir_9983ac6a1abe9238d230cdfb8f047d3c.html">drivers</a></li><li class="navelem"><a class="el" href="dir_9033855ad95d6625ffd5feab50f23009.html">pwm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">PWMTimerCC32XX.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PWM driver implementation using CC32XX General Purpose Timers. </p>
<p>============================================================================</p>
<p>The PWM header file should be included in an application as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_p_w_m_8h.html">ti/drivers/PWM.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_p_w_m_timer_c_c32_x_x_8h.html">ti/drivers/pwm/PWMTimerCC32XX.h</a>&gt;</span></div></div><!-- fragment --><p>Refer to <a class="el" href="_p_w_m_8h.html">PWM.h</a> for a complete description of the PWM driver APIs provided and examples of their use.</p>
<h2>Overview</h2>
<p>This driver configures a CC32XX General Purpose Timer (GPT) in PWM mode. When in PWM mode, each GPT is divided into 2 PWM outputs. This driver manages each output as an independent PWM instance. The timer is automatically configured in count-down mode using the system clock as the source.</p>
<p>The timers operate at the system clock frequency (80 MHz). So each timer tick is 12.5 ns. The period and duty registers are 16 bits wide; thus 8-bit prescalars are used to extend period and duty registers. The maximum value supported is 16777215 timer counts ((2^24) - 1) or 209715 microseconds. Updates to a PWM's period or duty will occur instantaneously (GPT peripherals do not have shadow registers).</p>
<p>When stopped, the driver will configure the pin in GPIO mode &amp; set the output to the PWM_IdleLevel specified in the params used during open. Users need be aware that while PIN 19 can be used for PWM it is not GPIO capable, so it cannot be set to the PWM_IdleLevel. Output voltage will be PWM output at the moment it is stopped.</p>
<p>Finally, when this driver is opened, it automatically changes the PWM pin's parking configuration (used when entering low power modes) to correspond with the PWM_IDLE_LEVEL set in the PWM_params. However, this setting is not reverted once the driver is closed, it is the users responsibility to change the parking configuration if necessary.</p>
<h3>CC32xx PWM Driver Configuration</h3>
<p>In order to use the PWM APIs, the application is required to define 4 configuration items in the application ti_drivers_config.c file:</p>
<ol type="1">
<li>An array of <a class="el" href="struct_p_w_m_timer_c_c32_x_x___object.html" title="PWMTimerCC32XX Object. ">PWMTimerCC32XX_Object</a> elements, which will be used by by the driver to maintain instance state. Below is an example <a class="el" href="struct_p_w_m_timer_c_c32_x_x___object.html" title="PWMTimerCC32XX Object. ">PWMTimerCC32XX_Object</a> array appropriate for the CC3220SF LaunchPad board: <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_p_w_m_8h.html">ti/drivers/PWM.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_p_w_m_timer_c_c32_x_x_8h.html">ti/drivers/pwm/PWMTimerCC32XX.h</a>&gt;</span></div><div class="line"></div><div class="line"><a class="code" href="struct_p_w_m_timer_c_c32_x_x___object.html">PWMTimerCC32XX_Object</a> pwmTimerCC3220SObjects[CC3220SF_LAUNCHXL_PWMCOUNT];</div></div><!-- fragment --></li>
<li>An array of <a class="el" href="struct_p_w_m_timer_c_c32_x_x___h_w_attrs_v2.html" title="PWMTimerCC32XX Hardware attributes. ">PWMTimerCC32XX_HWAttrsV2</a> elements that defines which pin will be used by the corresponding PWM instance (see <a class="el" href="group__pwm_pin_identifiers_c_c32_x_x.html">PWMTimerCC32XX_HWAttrs 'pwmPin' field options</a>). Below is an example <a class="el" href="struct_p_w_m_timer_c_c32_x_x___h_w_attrs_v2.html" title="PWMTimerCC32XX Hardware attributes. ">PWMTimerCC32XX_HWAttrsV2</a> array appropriate for the CC3220SF LaunchPad board: <div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="struct_p_w_m_timer_c_c32_x_x___h_w_attrs_v2.html">PWMTimerCC32XX_HWAttrsV2</a> pwmTimerCC3220SHWAttrs[CC3220SF_LAUNCHXL_PWMCOUNT] = {</div><div class="line">    {</div><div class="line">        .<a class="code" href="struct_p_w_m_timer_c_c32_x_x___h_w_attrs_v2.html#a9b4f342c57b063fceb50b237ce5520de">pwmPin</a> = <a class="code" href="group__pwm_pin_identifiers_c_c32_x_x.html#ga3618e170f0375e7f4c41263559d1282f">PWMTimerCC32XX_PIN_01</a></div><div class="line">    },</div><div class="line">    {</div><div class="line">        .pwmPin = <a class="code" href="group__pwm_pin_identifiers_c_c32_x_x.html#gaf155150099317e188cd7de403c210bf5">PWMTimerCC32XX_PIN_02</a></div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --></li>
<li>An array of <a class="el" href="_p_w_m_8h.html#af4fdcd36077e2aba99d6996ae1ea64ec">PWM_Config</a> elements, one for each PWM instance. Each element of this array identifies the device-specific API function table, the device specific PWM object instance, and the device specific Hardware Attributes to be used for each PWM channel. Below is an example <a class="el" href="_p_w_m_8h.html#af4fdcd36077e2aba99d6996ae1ea64ec">PWM_Config</a> array appropriate for the CC3220SF LaunchPad board: <div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="struct_p_w_m___config__.html">PWM_Config</a> PWM_config[CC3220SF_LAUNCHXL_PWMCOUNT] = {</div><div class="line">    {</div><div class="line">        .<a class="code" href="struct_p_w_m___config__.html#a36b812aeed91072b4a917e7342278d3b">fxnTablePtr</a> = &amp;<a class="code" href="_p_w_m_timer_c_c32_x_x_8h.html#aa0467f4acf73bc378b6964164d0065dc">PWMTimerCC32XX_fxnTable</a>,</div><div class="line">        .object = &amp;pwmTimerCC3220SObjects[CC3220SF_LAUNCHXL_PWM6],</div><div class="line">        .hwAttrs = &amp;pwmTimerCC3220SHWAttrs[CC3220SF_LAUNCHXL_PWM6]</div><div class="line">    },</div><div class="line">    {</div><div class="line">        .fxnTablePtr = &amp;<a class="code" href="_p_w_m_timer_c_c32_x_x_8h.html#aa0467f4acf73bc378b6964164d0065dc">PWMTimerCC32XX_fxnTable</a>,</div><div class="line">        .object = &amp;pwmTimerCC3220SObjects[CC3220SF_LAUNCHXL_PWM7],</div><div class="line">        .hwAttrs = &amp;pwmTimerCC3220SHWAttrs[CC3220SF_LAUNCHXL_PWM7]</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --></li>
<li>A global variable, PWM_count, that informs the driver how many PWM instances are defined: <div class="fragment"><div class="line"><span class="keyword">const</span> uint_least8_t PWM_count = CC3220SF_LAUNCHXL_PWMCOUNT;</div></div><!-- fragment --></li>
</ol>
<h3>Power Management</h3>
<p>The TI-RTOS power management framework will try to put the device into the most power efficient mode whenever possible. Please see the technical reference manual for further details on each power mode.</p>
<p>The PWMTimerCC32XX driver explicitly sets a power constraint when the PWM is running to prevent LPDS. The following statements are valid:</p><ul>
<li>After <a class="el" href="_p_w_m_8h.html#ae97f12cfc5530577069f76813504da3a" title="This function opens a given PWM instance and sets the period, duty and idle level to those specified ...">PWM_open()</a>: Clocks are enabled to the timer resource and the configured pwmPin. The device is still allowed to enter LPDS.</li>
<li>After <a class="el" href="_p_w_m_8h.html#aa1bd0cc3f0fa52879422fca74d254378" title="Function to start the specified PWM handle with current settings. ">PWM_start()</a>: LPDS is disabled when PWM is running.</li>
<li>After <a class="el" href="_p_w_m_8h.html#ae83a4cd327a07d6037ff1a8d72fb3ae6" title="Function to stop the specified PWM handle. Output will set to the idle level specified by params in P...">PWM_stop()</a>: Conditions are equal as for after PWM_open</li>
<li>After <a class="el" href="_p_w_m_8h.html#a0e0f5899b067d27653db566fb148db11" title="Function to close a PWM instance specified by the PWM handle. ">PWM_close()</a>: The underlying GPTimer is turned off, and the clocks to the timer and pin are disabled.. <hr/>
</li>
</ul>
</div><div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_power_8h_source.html">ti/drivers/Power.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_p_w_m_8h_source.html">ti/drivers/PWM.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for PWMTimerCC32XX.h:</div>
<div class="dyncontent">
<div class="center"><img src="_p_w_m_timer_c_c32_x_x_8h__incl.png" border="0" usemap="#_p_w_m_timer_c_c32_x_x_8h" alt=""/></div>
<map name="_p_w_m_timer_c_c32_x_x_8h" id="_p_w_m_timer_c_c32_x_x_8h">
<area shape="rect" id="node3" href="_power_8h.html" title="Power Manager. " alt="" coords="81,80,205,107"/>
<area shape="rect" id="node7" href="_p_w_m_8h.html" title="Pulse Width Modulation (PWM) driver. " alt="" coords="235,155,355,181"/>
<area shape="rect" id="node4" href="_list_8h.html" title="Linked List interface for use in drivers. " alt="" coords="75,155,211,181"/>
</map>
</div>
</div>
<p><a href="_p_w_m_timer_c_c32_x_x_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_w_m_timer_c_c32_x_x___h_w_attrs_v2.html">PWMTimerCC32XX_HWAttrsV2</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTimerCC32XX Hardware attributes.  <a href="struct_p_w_m_timer_c_c32_x_x___h_w_attrs_v2.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_w_m_timer_c_c32_x_x___object.html">PWMTimerCC32XX_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTimerCC32XX Object.  <a href="struct_p_w_m_timer_c_c32_x_x___object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">PIN 01, GPIO10, uses Timer3A for PWM.</div></td></tr>
<tr class="memitem:ga3618e170f0375e7f4c41263559d1282f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm_pin_identifiers_c_c32_x_x.html#ga3618e170f0375e7f4c41263559d1282f">PWMTimerCC32XX_PIN_01</a></td></tr>
<tr class="separator:ga3618e170f0375e7f4c41263559d1282f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">PIN 02, GPIO11, uses Timer3B for PWM.</div></td></tr>
<tr class="memitem:gaf155150099317e188cd7de403c210bf5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm_pin_identifiers_c_c32_x_x.html#gaf155150099317e188cd7de403c210bf5">PWMTimerCC32XX_PIN_02</a></td></tr>
<tr class="separator:gaf155150099317e188cd7de403c210bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">PIN 17, GPIO24, uses Timer0A for PWM.</div></td></tr>
<tr class="memitem:ga26150cae31df21ab2940bc1197ad9d89"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm_pin_identifiers_c_c32_x_x.html#ga26150cae31df21ab2940bc1197ad9d89">PWMTimerCC32XX_PIN_17</a></td></tr>
<tr class="separator:ga26150cae31df21ab2940bc1197ad9d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">PIN 19, uses Timer1B for PWM.</div></td></tr>
<tr class="memitem:ga0494fc4c430672164f9da33123e552c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm_pin_identifiers_c_c32_x_x.html#ga0494fc4c430672164f9da33123e552c3">PWMTimerCC32XX_PIN_19</a></td></tr>
<tr class="separator:ga0494fc4c430672164f9da33123e552c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">PIN 21, GPIO25, uses Timer1A for PWM.</div></td></tr>
<tr class="memitem:gaf825b711c08749fa231f21ebd4dc393d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm_pin_identifiers_c_c32_x_x.html#gaf825b711c08749fa231f21ebd4dc393d">PWMTimerCC32XX_PIN_21</a></td></tr>
<tr class="separator:gaf825b711c08749fa231f21ebd4dc393d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">PIN 64, GPIO9, uses Timer2B for PWM.</div></td></tr>
<tr class="memitem:ga8f18fefd94a4a5f08ae3ad0d620c8c97"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pwm_pin_identifiers_c_c32_x_x.html#ga8f18fefd94a4a5f08ae3ad0d620c8c97">PWMTimerCC32XX_PIN_64</a></td></tr>
<tr class="separator:ga8f18fefd94a4a5f08ae3ad0d620c8c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa0467f4acf73bc378b6964164d0065dc"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_p_w_m___fxn_table.html">PWM_FxnTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_timer_c_c32_x_x_8h.html#aa0467f4acf73bc378b6964164d0065dc">PWMTimerCC32XX_fxnTable</a></td></tr>
<tr class="separator:aa0467f4acf73bc378b6964164d0065dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa0467f4acf73bc378b6964164d0065dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0467f4acf73bc378b6964164d0065dc">&sect;&nbsp;</a></span>PWMTimerCC32XX_fxnTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_p_w_m___fxn_table.html">PWM_FxnTable</a> PWMTimerCC32XX_fxnTable</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
  <a href="http://www.ti.com/corp/docs/legal/copyright.shtml">&copy; Copyright 1995-2020</a>, Texas Instruments Incorporated. All rights reserved. <br>
  <a href="http://www.ti.com/corp/docs/legal/trademark/trademrk.htm">Trademarks</a> | <a href="http://www.ti.com/corp/docs/legal/privacy.shtml">Privacy policy</a> | <a href="http://www.ti.com/corp/docs/legal/termsofuse.shtml">Terms of use</a> | <a href="http://www.ti.com/lsds/ti/legal/termsofsale.page">Terms of sale</a>
</small>
</body>
</html>
